<view class="container">
  <!-- 商品信息 -->
  <view class="goods-info">
    <image src="{{goodsImages}}" mode="aspectFill" class="goods-image"></image>
    <view class="goods-detail">
      <text class="goods-name">{{goodsDetail.targetName}}</text>
      <view class="goods-price">
        <text class="price">¥{{goodsDetail.targetAmount}}</text>
        <text class="num">x{{buyNum}}</text>
      </view>
    </view>
  </view>

  <!-- 收货地址 -->
  <view class="address-section" bindtap="showAddressPicker">
    <view class="address-content" wx:if="{{selectedAddress}}">
      <view class="user-info">
        <text class="name">{{selectedAddress.name}}</text>
        <text class="phone">{{selectedAddress.phone}}</text>
      </view>
      <view class="address">{{selectedAddress.address}}</view>
    </view>
    <view class="no-address" wx:else>
      <text>{{t('order.choseAdd')}}</text>
    </view>
    <image class="arrow-right" src="/static/images/arrow-right.png"></image>
  </view>

  <!-- 订单金额 -->
  <view class="amount-section">
    <text class="label">{{t('order.pay')}}</text>
    <text class="amount">¥{{totalAmount}}</text>
  </view>

  <!-- 提交按钮 -->
  <button class="submit-btn" bindtap="submitOrder">{{t('order.submit')}}</button>

  <!-- 地址选择弹窗 -->
  <view class="address-popup" wx:if="{{showAddressPopup}}">
    <view class="popup-mask" bindtap="hideAddressPicker"></view>
    <view class="popup-content">
      <view class="address-list">
        <view class="address-item {{selectedAddressIndex === index ? 'selected' : ''}}" 
              wx:for="{{addressList}}" 
              wx:key="id"
              bindtap="selectAddress"
              data-index="{{index}}">
          <view class="user-info">
            <text class="name">{{item.name}}</text>
            <text class="phone">{{item.phone}}</text>
            <text class="default" wx:if="{{item.isDefault}}">{{t('mine.default')}}</text>
          </view>
          <view class="address">{{item.address}}</view>
        </view>
      </view>
      <button class="add-address-btn" bindtap="addNewAddress">{{t('mine.addAddress')}}</button>
    </view>
  </view>
</view> 