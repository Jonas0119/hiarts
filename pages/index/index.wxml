<view class="container">
  <!-- 自定义顶部导航 -->
  <view class="index-title">
    <view class="nav">
      <view class="logo-container">
        <image src="/static/images/logo-title.png" class="logo"></image>
        <text class="subtitle">{{t('index.subtitle')}}</text>
      </view>
      <text class="locale" bindtap="changeLocale">{{locale === 'zh-Hant' ? '繁體' : 'English'}}</text>
    </view>
  </view>

  <!-- 页面内容区 -->
  <scroll-view class="page-scroll-view">
    <!-- Banner -->
    <swiper class="banner" indicator-dots="true" autoplay="true" circular="true">
      <swiper-item wx:for="{{bannerList}}" wx:key="index">
        <image src="{{item.image}}" mode="aspectFill" class="banner-image"></image>
      </swiper-item>
    </swiper>

    <!-- 数据统计 -->
    <view class="nums">
      <view class="items">
        <text class="label">{{t('index.memberCount')}}</text>
        <text class="value">{{users}}</text>
      </view>
      <view class="block"></view>
      <view class="items">
        <text class="label">{{t('index.viewCount')}}</text>
        <text class="value">{{views}}</text>
      </view>
    </view>

    <!-- 功能分类 -->
    <view class="grid">
      <view class="grid-item" wx:for="{{5}}" wx:key="index" bindtap="goToTypeList" data-type="{{index}}">
        <image 
          src="{{locale === 'zh-Hant' ? '/static/images/gird-icon-' + (index + 1) + '.png' : '/static/images/gird-icon-' + (index + 1) + '-e.png'}}"
          mode="aspectFit" 
          class="grid-img"
        ></image>
        <text class="grid-text">{{t('index.dataChannel')}}</text>
      </view>
    </view>

    <!-- 汇率展示 -->
    <view class="title">
      <view class="title-text">{{t('index.exchangeRate')}}</view>
    </view>

    <view class="chart">
      <view class="chart-title">
        <view class="currency-info">
          <image src="/static/images/hk.png" mode="widthFix" class="flag-img"></image>
          <text class="bold">{{t('index.hkdCny')}}</text>
        </view>
        <text class="num">1HKD={{hkd}}CNY</text>
      </view>
      <view class="chart-container">
        <ec-canvas id="mychart-dom-line" canvas-id="mychart-line" ec="{{ ec }}"></ec-canvas>
      </view>
    </view>

    <!-- 商品列表 -->
    <view class="title">
      <text class="title-text">{{t('index.recommendedGoods')}}</text>
      <text bindtap="goToList" class="link">{{t('index.viewAll')}} ></text>
    </view>

    <view class="goods">
      <view class="item" wx:for="{{goodsList}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
        <image class="image" mode="aspectFill" src="{{item.targetImage}}"></image>
        <view class="words">
          <text class="t1">{{locale === 'zh-Hant' ? item.targetName : item.targetNameEnglish}}</text>
          <view class="fdr">
            <text class="t4">{{t('goods.waiting')}}：</text>
            <text class="t2">{{item.stockNum - item.buyedNum}}{{t('goods.unit')}}</text>
          </view>
          <view class="fdr">
            <text class="t4">{{t('goods.price')}}：</text>
            <text class="t3">HK$ {{item.targetAmount}}</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>
</view>
